<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid 그리기</title>
    <style>
        body {
            background-color: aquamarine;
            margin: 0;
            left: 0;
        }
    </style>
</head>

<body>
    <canvas id="myCanvas" width="420px" height="420px" style="background-color: white; margin: 20px;"></canvas>
    <button onclick="fn_draw()">그려</button>

    <script>
        var arrayx = [];
        var arrayy = [];
        let w = 400;
        let h = 400;
        let p = 10;
        let i = 0;
        let canvas = document.getElementById('myCanvas');
        let context = canvas.getContext('2d');
        function fn_draw() {
            for (p = 10; p <= 420; p += 40) {
                context.moveTo(p, 10);
                context.lineTo(p, 410);
                arrayx.push(p);
            }
            console.log(arrayx);
            i = 0;
            for (p = 10; p <= 420; p += 40) {
                context.moveTo(10, p);
                context.lineTo(410, p);
            }

            context.strokeStyle = 'black';
            context.stroke();

        }
        document.addEventListener('click', function (event) {
            // 이벤트 객체에서 마우스 좌표 정보 추출
            var x = event.clientX-30;
            var y = event.clientY-30;
            for (let i = 0; i < arrayx.length; i++) {
                if (arrayx[i] <= x && arrayx[i + 1] > x) {
                    for (let j = 0; j < arrayx.length; j++) {
                        if (arrayx[j] <= y && arrayx[j + 1] > y) {
                            console.log(arrayx[i], arrayx[j], x, y);
                            context.beginPath();
                            context.fillStyle = 'violet';
                            context.rect(arrayx[i], arrayx[j], 40, 40);
                            context.fill();
                        }
                    }

                }
            }
            // for (let i = 10; i <= 410; i += 40) {
            //     if (i < x && i + 40 > x) {
            //         for (let j = 10; j <= 410; j += 40) {
            //             if (j < y && j + 40 > y) {
            //                 context.beginPath();
            //                 context.fillStyle = 'violet';
            //                 context.rect(i, j, 40, 40);
            //                 context.fill();
            //             }
            //         }

            //     }
            // }


            // 콘솔에 출력
            console.log("마우스 클릭 위치 (x, y) : " + x + ", " + y);
        });
    </script>
</body>

</html>